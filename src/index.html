<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SantanderPlus</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <script type="text/javascript">

      function userDidTapBackButton(){
        if(window.location.pathname == "/" || window.location.pathname == "/consulta"){
          Connect.goToRoot();
        } else {
          Connect.goBack();
          localStorage.setItem('backButton', "true");
        }
      }

      function requestToken() {

        // var run = Bridge.runAsync();
        //
        // run.then = function(callback){
        //     var name = "callback_"+Math.floor((Math.random() * 100000));
        //     window[name] = callback
        //     return run.thenJS(name);
        // }
        //
        // run.then(function(a){
        //     console.log("CALLBACK in JAVASCRIPT "+JSON.stringify(a));
        // });


        var promise = TokenManager.getToken();

        var successCallback = function(token){
          responseToken(token);
        };
        var errorCallback = function(mensaje){
          responseError(mensaje)
        };
        //alert(promise);
        promise.then(
          function(token,tipoOTP,date){
            responseToken(token,tipoOTP,date,'');
          },
          function(mensaje){
            responseError('',mensaje);
          }
        );

        promise.run();

      }

      function responseToken(tokenString,tipoOTP,date,message){
        window.angularComponentRef.componentFn(tokenString, tipoOTP, date, message);
      }




  </script>
</head>
<body>
  <app-root></app-root>
</body>
</html>
